<nav class="navbar navbar-inverse navbar-fixed-top ">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navie">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <capstone-logo></capstone-logo>
    </div>

    <div id="navie" class="navbar-collapse collapse">

      <!-- nav links -->
      <ul class="nav navbar-nav navbar-left">
        <li ng-repeat="item in items" ng-if="!item.auth || isLoggedIn()">
          <a ui-sref-active="active" ui-sref="{{ item.state }}">{{ item.label }}</a>
        </li>
        <li ng-if='isLoggedIn()'>
          <a ui-sref-active='active' ui-sref="plans" >My Learning Plans</a>
        </li>
        <li ng-if='user.isAdmin'>
          <a ui-sref-active='active' ui-sref="admin.users" >Admin</a>
        </li>
      </ul>


      <ul class="nav navbar-nav navbar-right">
        <!-- search bar -->
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="glyphicon glyphicon-search"></i></a>
          <ul class="dropdown-menu" style="padding:12px;">
            <form class="form-inline">
               <input
             	    type="text"
                  class="form-control"
                  placeholder="Search for a topic"
                  ng-model="selectedTopic"
                  uib-typeahead="topic as topic.title for topic in topics | filter:$viewValue | limitTo:5"
                  typeahead-template-url="/js/common/directives/search-box/search-tpl.html">
               <button type="submit" class="btn btn-danger ">
                 <i class="glyphicon glyphicon-search"></i>
               </button>
            </form>
          </ul>
        </li>
        <!-- user controls -->
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="glyphicon glyphicon-user"></i> <i class="glyphicon glyphicon-chevron-down"></i></a>
          <ul class="dropdown-menu">
            <li><a href="#"><i class="fa fa-cog"></i> Login</a></li>
            <li><a href="#"><i class="fa fa-user"></i> Profile</a></li>
            <li class="divider"></li>
            <li><a href="#"><i class="fa fa-sign-out"></i> Logout</a></li>
           </ul>
        </li>
        <li ng-if="!user">
          <button ui-sref="signup" class="btn login-button">Sign Up</button>
        </li>
        <li ng-if="!user">
          <button ui-sref="login" class="btn login-button">Login</button>
        </li>
        <li ng-if="user" class="welcome">
          <span>Welcome, <a ui-sref-active="active" ui-sref="userProfile">{{ user.username }}!</a></span>
        </li>
        <li ng-if="user" class="welcome">
          <span><a ng-click="logout()">Logout</a></span>
        </li>
        </ul>
    </div>
  </div>
</nav>
